javascript:(function(){const%20urlWithFilters="";if(urlWithFilters){const%20filterParams=new%20URL(urlWithFilters).searchParams;const%20page=window.location.pathname.slice(0,-1).split("/").pop().replace("s","");if(window.location.hostname=="archiveofourown.org"&&(page=="work"||page=="bookmark")){const filters=new%20URLSearchParams(window.location.search);for(let[key,value]of%20filterParams){if(value.length){if(!key.includes(page)&&(key.includes("clude_")||key.includes("lang")||(key.includes("sort_")&&(value=="revised_at"||value=="bookmarkable_date"))||(key.includes("_tag")&&!key.includes("mark_tag"))||(key.includes("query")&&!key.includes("mark_query")))){key=key.replace(/(work_search|bookmark_search)/,page+"_search");key=key.includes("bookmarkable_query")?key.replace("bookmarkable_",""):key.replace("query","bookmarkable_query");value=value=="revised_at"?"bookmarkable_date":value.replace("bookmarkable_date","revised_at");}if(!filters.getAll(key).includes(value)&&key.includes(page+"_search")){if(filters.get(key)==null||filters.get(key)==""||((key.includes("rec")||key.includes("_notes"))&&filters.get(key)==0)||(key.includes("sort_")&&(filters.get(key)=="revised_at"||(key.includes("mark_")&&filters.get(key)=="created_at")))){filters.set(key,value);}else%20if(!(key.startsWith(page)||(key.startsWith("include_")&&key.includes("rating_ids")))){filters.append(key,value);}else%20if(key.includes("_tag_names")){filters.set(key,filters.get(key)+","+value);}else%20if(key.includes("query")){filters.set(key,filters.get(key)+"%20"+value);}}}}if("?"+filters-toString()!=window.location.search){window.location.search=filters.toString();}}}})();
